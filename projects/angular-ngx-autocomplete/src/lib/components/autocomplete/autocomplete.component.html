<div
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
  class="autocomplete-container"
  dir="rtl"
  #containerDiv
  (mouseenter)="setClearButtonVisibility()"
  (mouseleave)="setClearButtonVisibility()"
  (focusout)="onContainerBlur()">
  <input
    #inputElement
    class="text-input"
    [disabled]="disabled"
    type="text"
    [autocomplete]="autocomplete"
    [value]="viewValue"
    placeholder="{{ placeholder || '' }}"
    tseTextInputEnToFa
    (keydown)="onInputKeyDown($event)"
    (blur)="onInputBlur()" />
  <i
    *ngIf="showClearButton"
    class="clear-button fa fa-remove small-icon red-c"
    (click)="onClear($event)"></i>
  <i
    *ngIf="isLoading"
    class="clear-button fa fa-rotate small-icon blue-c fa-spin"></i>

  <!-- showSuggestions -->
  <ng-template
    cdkConnectedOverlay
    [cdkConnectedOverlayOrigin]="trigger"
    [cdkConnectedOverlayOpen]="showSuggestions">
    <div
      class="suggestions white-bg border z-2 ov-auto radius-5"
      [ngStyle]="overlayStyles">
      <ng-container
        *ngIf="items && !isLoading"
        [ngTemplateOutlet]="
          items.length ? suggestionsTemplate : noSuggestionTemplate
        ">
      </ng-container>
      <ng-template #suggestionsTemplate>
        <ng-container
          *ngIf="suggestionHeader?.templateRef"
          [ngTemplateOutlet]="suggestionHeader.templateRef"></ng-container>
        <div
          class="suggestion-items-container"
          [style.max-height.px]="suggestionContainerHeight">
          <div
            [ngClass]="suggestionItemClass"
            class="suggestion-item"
            *ngFor="let suggestion of items; let i = index; trackBy: trackById"
            [class.highlighted]="highlightIndex === i"
            (mouseenter)="this.highlightedIndex = i"
            (mouseleave)="this.highlightedIndex = -1"
            (mousedown)="onSuggestionClick(i, $event)">
            <ng-container
              [ngTemplateOutlet]="
                suggestionContent?.templateRef ||
                defaultSuggestionContentTemplate
              "
              [ngTemplateOutletContext]="{
                $implicit: suggestion
              }"></ng-container>
            <ng-template #defaultSuggestionContentTemplate>
              <p class="suggestion-value pd-5 fw-300 nowrap">
                {{ suggestions[i] }}
              </p>
            </ng-template>
          </div>
        </div>
        <ng-container
          *ngIf="suggestionFooter?.templateRef"
          [ngTemplateOutlet]="suggestionFooter.templateRef">
        </ng-container>
      </ng-template>
      <ng-template #noSuggestionTemplate>
        <ng-container
          *ngIf="term.length >= minimumCharacterForSearch"
          [ngTemplateOutlet]="
            noSuggestionDirective?.templateRef || defaultNoSuggestionTemplate
          ">
        </ng-container>
        <ng-template #defaultNoSuggestionTemplate>
          <p class="pd-5">{{ noSuggestionText }}</p>
        </ng-template>
      </ng-template>
    </div>
  </ng-template>
</div>
